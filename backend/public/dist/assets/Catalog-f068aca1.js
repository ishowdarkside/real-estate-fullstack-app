import{c as u,e as p,j as e,r as h,S as m,u as j}from"./index-0e1f805a.js";import{a as v}from"./useGetPosts-8083d829.js";import{u as x,L as g}from"./index.esm-c30642fc.js";import"./posts-b5afee41.js";const _="_catalogBody_wcfll_1",f="_catalogItem_wcfll_11",P="_postContainer_wcfll_28",S="_postInfo_wcfll_43",N="_postLocation_wcfll_50",y="_price_wcfll_60",C="_pagination_wcfll_66",b="_activePage_wcfll_87",w="_results_wcfll_92",r={catalogBody:_,catalogItem:f,postContainer:P,postInfo:S,postLocation:N,price:y,pagination:C,activePage:b,results:w},k="_filterPanel_w93va_1",I="_form_w93va_8",L="_priceWrapper_w93va_67",o={filterPanel:k,form:I,priceWrapper:L};function F(){const s=u(),{register:a,handleSubmit:n}=x(),[i,t]=p();function l(c){c.vrstaOglasa==="remove"&&(c.vrstaOglasa=""),c.location==="remove"&&(c.location=""),c.tipNekretnine==="remove"&&(c.tipNekretnine=""),t(c),s.invalidateQueries({queryKey:["posts"]})}return e.jsxs("div",{className:o.filterPanel,children:["Filtriraj nekretnine prema:",e.jsxs("form",{className:o.form,onSubmit:n(c=>l(c)),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tipNekretnine",children:"Tip nekretnine"}),e.jsxs("select",{...a("tipNekretnine"),children:[e.jsx("option",{value:"remove",children:"Sve"}),e.jsx("option",{value:"stan",children:"Stan"}),e.jsx("option",{value:"kuca",children:"Kuća"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",children:"Cijena"}),e.jsxs("div",{className:o.priceWrapper,children:[e.jsx("input",{type:"number",placeholder:"OD",...a("pricegte")}),e.jsx("input",{type:"number",placeholder:"DO",...a("pricelte")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",children:"Lokacija"}),e.jsx(g,{register:a,bgColor:"gray",includeAll:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"vrstaOglasa",children:"Vrsta oglasa"}),e.jsxs("select",{...a("vrstaOglasa"),children:[e.jsx("option",{value:"remove",children:"Sve"}),e.jsx("option",{value:"izdavanje",children:"Izdavanje"}),e.jsx("option",{value:"prodaja",children:"Prodaja"})]})]}),e.jsx("button",{children:"Spasi izmjene"})]})]})}const W="_searchWrapper_1dtxv_1",d={searchWrapper:W};function O(){const[s,a]=h.useState(""),[n,i]=p();function t(l){a(l.target.value),i({search:l.target.value})}return e.jsx("div",{className:d.searchPanel,children:e.jsxs("div",{className:d.searchWrapper,children:[e.jsx("img",{src:"/search.svg",alt:"lupa"}),e.jsx("input",{type:"search",name:"gsearch",placeholder:"Traži po naslovu",onChange:l=>t(l),value:s})]})})}function q(s){const[a,n]=p(),i=u();h.useEffect(()=>{const t=new URLSearchParams(a);t.set("page",s.toString()),n(t),i.invalidateQueries({queryKey:["posts"]})},[s,a,i,n])}function Q(){const{data:s,isLoading:a}=v(),[n,i]=h.useState(1);return q(n),e.jsx("div",{className:r.catalogBody,children:e.jsxs("div",{className:"container",children:[e.jsx(O,{}),e.jsx(F,{}),e.jsxs("div",{className:r.postContainer,children:[a&&e.jsx(m,{}),!a&&e.jsxs("span",{className:r.results,children:["Rezultati: ",s.total]}),!a&&s.posts.map(t=>e.jsx(z,{item:t},t._id)),!a&&s.posts.length>0&&e.jsxs("div",{className:r.pagination,children:[n-1>0&&e.jsx("button",{onClick:()=>i(t=>t-1),children:n-1}),e.jsx("button",{className:r.activePage,children:n}),s.left>0&&e.jsx("button",{onClick:()=>i(t=>t+1),children:n+1})]})]})]})})}function z({item:s}){const a=j();return e.jsxs("div",{className:r.catalogItem,onClick:()=>a(`/app/post/${s._id}`),children:[e.jsx("img",{src:`/${s.imgs[0]}`}),e.jsxs("div",{className:r.postInfo,children:[e.jsx("span",{className:r.title,children:s.title}),e.jsxs("span",{className:r.price,children:[s.price.toLocaleString("en-US")," KM"]}),e.jsxs("div",{className:r.postLocation,children:[e.jsx("img",{src:"/pin.svg"}),e.jsx("span",{children:s.location[0].toUpperCase()+s.location.slice(1)})]})]})]})}export{Q as default};
