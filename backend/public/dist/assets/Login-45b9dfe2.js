import{u as g,n as c,r as l,j as e,S as u,L as h}from"./index-0e1f805a.js";import{s as j}from"./storeCookie-7a630560.js";import{u as f}from"./useMutation-3ec08b3e.js";import{u as x}from"./usePreventAccess-2bd80f40.js";const v="/";async function L(t){try{return await(await fetch(`${v}api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(n){throw new Error(n)}}function S(){const t=g(),{mutate:n,isLoading:r}=f({mutationFn:s=>L(s),onSuccess:s=>{s.status==="success"&&(c.success(s.message),j(s.token),t("/app")),s.status==="fail"&&c.error(s.message)}});return{mutate:n,isLoggingIn:r}}const w="_interfaceWrapper_1lb8z_1",y="_loginForm_1lb8z_17",i={interfaceWrapper:w,loginForm:y};function _(){const[t,n]=l.useState(""),[r,s]=l.useState(""),p=x(),{mutate:d,isLoggingIn:o}=S();function m(a){a.preventDefault(),!(!r||!t)&&d({email:t,password:r})}return p?e.jsx(u,{}):e.jsxs("div",{className:i.interfaceWrapper,children:[o&&e.jsx(u,{}),!o&&e.jsxs("form",{className:i.loginForm,onSubmit:a=>m(a),children:[e.jsxs("div",{className:i.headingWrapper,children:[e.jsx("h2",{children:"Prijava"}),e.jsx("h3",{children:"Popunite lične podatke"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email adresa"}),e.jsx("input",{type:"email",placeholder:"novak@gmail.com",value:t,onChange:a=>n(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",placeholder:"*********",value:r,onChange:a=>s(a.target.value)})]}),e.jsxs("span",{children:["Nemate postojeći račun? ",e.jsx(h,{to:"/register",children:"Registruj se"})]}),e.jsx("button",{children:"PRIJAVI SE"})]})]})}export{_ as default};
